<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso a PDFs - Inicio de Sesión</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-md">
        <h2 class="text-2xl font-bold mb-4 text-center">Iniciar Sesión</h2>
        <div id="login-container">
            <input id="email" type="text" placeholder="Usuario" class="w-full p-2 mb-4 border rounded-xl">
            <input id="password" type="password" placeholder="Contraseña" class="w-full p-2 mb-4 border rounded-xl">
            <button id="login-btn" class="w-full bg-blue-500 text-white p-2 rounded-xl hover:bg-blue-600">Entrar</button>
            <p id="error-message" class="text-red-500 text-center mt-2"></p>
        </div>
        <div id="content-container" class="hidden">
            <h3 class="text-xl font-semibold mb-2 text-center">Bienvenido, <span id="username"></span></h3>
            <div id="pdf-list" class="space-y-2"></div>
            <button id="logout-btn" class="w-full bg-red-500 text-white p-2 rounded-xl hover:bg-red-600 mt-4">Cerrar Sesión</button>
        </div>
    </div>

    <script>
        // Configuración de Firebase (rellena con tus datos de Firebase)
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "TU_AUTH_DOMAIN",
            projectId: "TU_PROJECT_ID",
            storageBucket: "TU_STORAGE_BUCKET",
            messagingSenderId: "TU_MESSAGING_SENDER_ID",
            appId: "TU_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const storage = firebase.storage();

        const users = {
            "Sara.Artigas": "art2012",
            "Paula.Villar": "Vill2012",
            "Jefrey.Alexander": "Ale2010",
            "Alexander.Mi2012": "oV4rDm2m"
        };

        document.getElementById("login-btn").addEventListener("click", async () => {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            if (users[email] === password) {
                document.getElementById("login-container").classList.add("hidden");
                document.getElementById("content-container").classList.remove("hidden");
                document.getElementById("username").textContent = email;
                loadPDFs(email);
            } else {
                document.getElementById("error-message").textContent = "Usuario o contraseña incorrectos.";
            }
        });

        document.getElementById("logout-btn").addEventListener("click", () => {
            document.getElementById("content-container").classList.add("hidden");
            document.getElementById("login-container").classList.remove("hidden");
            document.getElementById("email").value = "";
            document.getElementById("password").value = "";
        });

        async function loadPDFs(user) {
            const pdfList = document.getElementById("pdf-list");
            pdfList.innerHTML = "";

            const pdfs = user === "Alexander.Mi2012"
                ? ["admin-pdf1.pdf", "admin-pdf2.pdf"]
                : ["general-pdf1.pdf", "general-pdf2.pdf"];

            pdfs.forEach(async (pdfName) => {
                try {
                    const url = await storage.ref(pdfName).getDownloadURL();
                    const link = document.createElement("a");
                    link.href = url;
                    link.textContent = pdfName;
                    link.target = "_blank";
                    link.className = "block bg-green-100 p-2 rounded-xl text-center hover:bg-green-200";
                    pdfList.appendChild(link);
                } catch (error) {
                    console.error(`Error cargando ${pdfName}:`, error);
                }
            });
        }
    </script>
</body>
</html>
